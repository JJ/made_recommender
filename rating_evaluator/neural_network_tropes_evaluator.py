import logging

from sklearn.externals import joblib

from common.base_script import BaseScript
from common.string_utils import humanize_list


class NeuralNetworkTropesEvaluator(BaseScript):
    _logger = logging.getLogger(__name__)

    def __init__(self, neural_network_dumped_file: str):
        self._load_neural_network(neural_network_dumped_file)
        self._track_step('Ready to evaluate')

    def _load_neural_network(self, neural_network_dumped_file):
        self._track_step('Loading neural network')
        self.evaluator_resources = joblib.load(neural_network_dumped_file)
        self.neural_network = self.evaluator_resources['evaluator']
        self.tropes = self.evaluator_resources['inputs']
        self.tropes_reverse_index = {}
        for index, trope in enumerate(self.tropes):
            self.tropes_reverse_index[trope] = index

        self.base_empty_input = [0 for index in range(0, len(self.tropes))]

    def evaluate(self, list_of_tropes: list):
        self._track_message(f'Evaluating {list_of_tropes}')
        trope_indexes = self._build_list_of_trope_indexes(list_of_tropes)
        input = self._build_input(trope_indexes)
        predicted_rating = self.neural_network.predict([input])

        evaluation_tropes = [EvaluationTrope(name=self.tropes[index], index=index) for index in trope_indexes]
        evaluation = Evaluation(tropes=evaluation_tropes, rating=predicted_rating)
        return evaluation

    def evaluate_just_rating(self, list_of_tropes: list):
        #self._track_message(f'Evaluating just the rating {list_of_tropes}')
        trope_indexes = self._build_list_of_trope_indexes(list_of_tropes)
        input = self._build_input(trope_indexes)
        return self.neural_network.predict([input])

    def _build_input(self, trope_indexes):
        input = self.base_empty_input.copy()
        for index in trope_indexes:
            input[index] = 1
        return input

    def _build_list_of_trope_indexes(self, list_of_tropes):
        indexes = [element if isinstance(element, int) else self.tropes_reverse_index.get(element, None)
                   for element in list_of_tropes]
        return [index for index in indexes if index is not None]


class Evaluation(object):
    def __init__(self, tropes, rating: float):
        self.tropes = tropes
        self.rating = rating

    def __str__(self):
        return f'Evaluation [{humanize_list(self.tropes)}]->{self.rating}'


class EvaluationTrope(object):
    def __init__(self, name: str, index: int):
        self.name = name
        self.index = index

    def __str__(self):
        return f'{self.name}:{self.index}'


if __name__ == "__main__":
    neural_network_file = u'/Users/phd/workspace/made/made_recommender/datasets/evaluator_[26273, 162, 1].sav'
    evaluator = NeuralNetworkTropesEvaluator(neural_network_file)
    evaluation = evaluator.evaluate([1, 2, 3, 4, 5, 6, 7, 8, 9, 10])
    print(evaluation)

    avengers_endgame_tropes = 'ATeamFiring,AbdicateTheThrone,AbsurdlySharpBlade,AchillesInHisTent,AdaptationExpansion,AdultFear,AdultFear,AdvertisedExtra,AffirmativeActionLegacy,AfterTheEnd,AfterTheEnd,AlasPoorVillain,AlienArtsAreAppreciated,AllDeathsFinal,AllForNothing,AllStarCast,AllYourBaseAreBelongToUs,AlmostOutOfOxygen,AlternateSelf,AlternateTimeline,AlternateTimeline,AlternateUniverse,AlternateUniverse,AlternateUniverse,AmazonBrigade,AmbiguousSituation,AmicableExes,AnArmAndALeg,AndStarring,AndTheAdventureContinues,AnimalMotifs,AnswerCut,AntiRoleModel,ApocalypseHow,ApocalypticLog,ApocalypticLog,ArbitrarySkepticism,ArcWords,AscendedExtra,AscendedMeme,AscendedMeme,AssholeVictim,AstralProjection,AudienceSurrogate,AvengersAssemble,AvengersAssemble,BackForTheFinale,BackFromTheDead,BackToBackBadass,BackToBackBadasses,BadBadActing,BadassArmy,BadassBoast,BadassBoast,BadassFingersnap,BadassFingersnap,BadassFingersnap,BaitAndSwitch,BatmanGambit,BattleCouple,BattleInTheRain,BearHug,BeardOfSorrow,BewareTheSillyOnes,BigApplesauce,BigBad,BigBad,BigBad,BigBad,BigBadassBattleSequence,BigDamnHeroes,BigDamnHeroes,BigGuyRodeo,BigNo,BigYes,BittersweetEnding,BlackComedy,BodyHorror,BookEnds,BraidsOfBarbarism,BraidsOfBarbarism,BrickJoke,BrokenMasquerade,BrutalHonesty,BusCrash,ButtMonkey,CallBack,CallForward,CallToAgriculture,CantTakeAnythingWithYou,CastFromHitPoints,CelebrityParadox,CerebusRollercoaster,CharacterDeath,CharacterDevelopment,ChekhovsArmy,ChekhovsClassroom,ChekhovsGun,ChekhovsSkill,ClimacticBattleResurrection,ClipShow,CloseEnoughTimeline,ColdOpening,CollapsibleHelmet,ColonyDrop,ColorMotif,CombatPragmatist,ComedicSociopathy,ComfortFood,ComicBookMoviesDontUseCodenames,CompositeCharacter,ConquerorFromTheFuture,ContinuityCavalcade,ContinuityNod,ContinuityNod,ContrivedCoincidence,ConvectionSchmonvection,CoolShip,CrazyEnoughToWork,CreativeClosingCredits,CreatorCameo,CreatorCameo,CringeComedy,CueTheSun,CurbStompBattle,CurbStompBattle,CurbStompBattle,CutTheSafetyRope,DarkestHour,DarkestHour,DarkestHour,DarkestHour,DavidVsGoliath,DeadlyEuphemism,DeathFromAbove,DeathGlare,DeathSeeker,DeathSeeker,DeathSeeker,DeliberatelyMonochrome,DeliberatelyMonochrome,DemotedToExtra,DentedIron,DentedIron,DepopulationBomb,DespairEventHorizon,DespairEventHorizon,Determinator,DiedInYourArmsTonight,DiedInYourArmsTonight,DiesWideOpen,DiscOneFinalBoss,DistractedByMyOwnSexy,DistractedByMyOwnSexy,DogPileOfDoom,DoubleTake,DownerBeginning,DownerBeginning,Doylist,DramaticIrony,DramaticUnmask,DressingAsTheEnemy,DrowningMySorrows,DrowningMySorrows,DrowningMySorrows,DrowningMySorrows,DrowningMySorrows,DrowningMySorrows,DualWielding,EarnYourHappyEnding,ElevatorActionSequence,EleventhHourRanger,EmpoweredBadassNormal,EndOfAnEra,EnhancedPunch,EntertaininglyWrong,EpicFilm,EpicMovie,EvenEvilHasStandards,EverybodysDeadDave,EveryoneHasStandards,EvilCannotComprehendGood,ExhaustedEyeBags,ExpositoryHairstyleChange,ExpositoryHairstyleChange,ExtraDimensionalShortcut,ExtraLongEpisode,FaceDeathWithDignity,FacePalm,FacialHorror,FailedASpotCheck,FamousLastWords,FamousLastWords,FamousLastWords,FamousLastWords,FearfulSymmetry,FemaleGaze,FemaleGaze,FinalBattle,FinalBattle,FinalBattle,FinalBattle,FinalBattle,FinalSolution,FirstGirlWins,FishOutOfTemporalWater,FoodAsBribe,ForWantOfANail,ForegoneConclusion,Foreshadowing,ForgotAboutHisPowers,ForgottenFallenFriend,FormerlyFit,FormerlyFit,FountainOfYouth,FountainOfYouth,FreezeFrameBonus,FreezeFrameBonus,FriendOrIdolDecision,FriendlyRivalry,FromBadToWorse,FromTheMouthsOfBabes,GenderBlenderName,GenerationXerox,GeniusBruiser,GenreBusting,GenreShift,GentleGiant,GetAHoldOfYourselfMan,GhostCity,GiantFootOfStomping,GiantMook,GiantMook,GoIntoTheLight,GodzillaThreshold,GoldenSuperMode,GondorCallsForAid,GondorCallsForAid,GondorCallsForAid,GoombaStomp,GottaCatchEmAll,GrandFinale,GrandFinale,GrapplingHookPistol,GroinAttack,GroinAttack,HandBlast,HandSignals,HandWave,HandicappedBadass,HandsOnApproach,HappilyMarried,HaveWeMetYet,HeadbuttOfLove,HeelFaceTurn,HeelFaceTurn,HeelFaceTurn,HeelFaceTurn,HeelRealization,HellYesMoment,HelmetsAreHardlyHeroic,HeroOfAnotherStory,HeroicRROD,HeroicSacrifice,HeroicSacrifice,HeroicSacrifice,HeroicSacrifice,HeroicSacrifice,HeroicSuicide,HeroicSuicide,HeroicSuicide,HiddenDepths,Hikikomori,Hikikomori,Hikikomori,HistoricalHeroUpgrade,HitlersTimeTravelExemptionAct,HoistByHisOwnPetard,HopeBringer,HopeBringer,HopeSpot,HourglassPlot,HowTheMightyHaveFallen,HulkSpeak,HulkingOut,HumanShield,HumansAreSpecial,HumansAreWarriors,Hunk,HurtingHero,HypocrisyNod,IAmXSonOfY,IChooseToStay,IGotBigger,IGotYouCovered,IHatePastMe,IHatePastMe,IKnewThereWasSomethingAboutYou,IResembleThatRemark,IWarnedYou,IgnoredEpiphany,ImOkay,ImpaledWithExtremePrejudice,ImpaledWithExtremePrejudice,ImplausibleDeniability,ImpliedTrope,InTheirOwnImage,InnocentSwearing,InsignificantLittleBluePlanet,InstantArmor,InternalHomage,InternalReveal,InterruptedByTheEnd,InvertedTrope,ItIsBeyondSaving,ItMakesSenseInContext,ItWorksBetterWithBullets,ItsAllMyFault,ItsPersonal,ItsPersonal,ItsPersonal,ItsPersonal,Jerkass,JumpScare,JurisdictionFriction,KarmicDeath,KatanasAreJustBetter,KeepAway,KillEmAll,KilledMidSentence,KilledOffForReal,KilledOffscreen,KilledOffscreen,LOL69,LampshadeHanging,LampshadeHanging,LaserGuidedKarma,LazyAlias,LeftTheBackgroundMusicOn,Leitmotif,LetsYouAndHimFight,LifesWorkRuined,LifesWorkRuined,LifesWorkRuined,LightIsGood,LittleNo,LoadsAndLoadsOfCharacters,LockedOutOfTheLoop,LogoJoke,MacGuffin,MacGuffinDeliveryService,MagicalDefibrillator,MaliciousMisnaming,ManHug,ManlyTears,MarqueeAlterEgo,MarriedToTheJob,MarriedToTheJob,MassResurrection,MassTeleportation,MeaningfulBackgroundEvent,MeaningfulLook,MeaningfulName,MetaTwist,MileLongShip,MillionMookMarch,MillionToOneChance,MineralMacGuffin,MirrorMatch,MirroredConfrontationShot,MistakenIdentity,MoodWhiplash,MoreExpendableThanYou,MoreHeroThanThou,MotiveDecay,MotiveRant,MrFanservice,MuggedForDisguise,Muggles,MundaneUtility,MundaneUtility,MyFriendsAndZoidberg,MyGreatestFailure,MythArc,MythologyGag,NaiveNewcomer,NearVillainVictory,NeverTheSelvesShallMeet,NeverTheSelvesShallMeet,NeverTrustATrailer,NewNeoCity,NextSundayAD,NoEqualOpportunityTimeTravel,NoManShouldHaveThisPower,NoSell,NoSell,NoYou,NonFatalExplosions,NonSequiturThud,NoodleIncident,NormalFishInATinyPond,NothingIsScarier,NothingIsTheSameAnymore,NothingPersonal,NothingPersonal,NukeEm,NumberedHomeworld,OOCIsSeriousBusiness,ObviouslyEvil,ObviouslyEvil,OffWithHisHead,OffscreenMomentOfAwesome,OhCrap,OhCrap,OhCrap,OlderThanTheyLook,OminousMessageFromTheFuture,OmnicidalManiac,OmnicidalManiac,OmnidisciplinaryScientist,OncePerEpisode,OncePerEpisode,OnlyOneMeAllowedRightNow,OnlyTheChosenMayWield,OrbitalBombardment,OtherMeAnnoysMe,OurHeroIsDead,OurTimeMachineIsDifferent,OurTimeTravelIsDifferent,OutOfFocus,OverlyLongGag,PassingTheTorch,PassingTheTorch,PetTheDog,PlanetTerra,PlayedForLaughs,PlayedForLaughs,PlayedWith,PlotArmor,PoorCommunicationKills,PottyFailure,PowerWalk,PreAsskickingOneLiner,PreAsskickingOneLiner,PreMortemOneLiner,PrecrimeArrest,PrescienceIsPredictable,ProductPlacement,PropagandaMachine,PuttingTheBandBackTogether,PyrrhicVictory,RapidAging,RaysFromHeaven,RealLife,RealLifeWritesThePlot,ReclaimedByNature,RedEyesTakeWarning,RedHerring,RedemptionEqualsDeath,RedemptionRejection,ReducedToDust,ReducedToDust,ReedRichardsIsUseless,RefugeInAudacity,RelationshipResetButton,ReportsOfMyDeathWereGreatlyExaggerated,ResetButton,ResetButton,RetiredMonster,RetiredMonster,RichesToRags,RoaringRampageOfRevenge,RoleReprisal,RoseTintedNarrative,RotatingArcs,RousingSpeech,RousingSpeech,RousingSpeech,RuleOfThree,SadClown,ScienceFiction,SeenItAll,SelfDeprecation,SelfFulfillingProphecy,SenselessSacrifice,SequelGoesForeign,SequelHook,SequelLogoInRuins,SeriesFauxnale,SetRightWhatOnceWentWrong,SetRightWhatOnceWentWrong,ShoutOut,ShownTheirWork,ShutUpHannibal,SingleTear,SingleTear,SirNotAppearingInThisTrailer,SixthRanger,SixthRanger,SkywardScream,SmallRoleBigImpact,SpannerInTheWorks,SpiderLimbs,SpiderLimbs,SpinToDeflectStuff,SplashOfColor,SpoilerTitle,StoryBreakerPower,StoryboardingTheApocalypse,StoutStrength,StrippedToTheBone,StupidSexyFlanders,SubvertedTrope,SuperSoldier,SupermanStaysOutOfGotham,SurvivorsGuilt,SuspiciouslySimilarSubstitute,TakeAThirdOption,TakeThat,TakesOneToKillOne,TapOnTheHead,TechnoBabble,TemporalMutability,ThatManIsDead,TheApocalypseBringsOutTheBestInPeople,TheBadGuyWins,TheBrute,TheBusCameBack,TheCameo,TheCaper,TheCaper,TheCartel,TheCavalry,TheCavalry,TheDoorSlamsYou,TheDreaded,TheDreaded,TheFellowshipHasEnded,TheHeroDies,TheHorde,TheInfiltration,TheNeedsOfTheMany,TheNicknamer,TheNicknamer,TheOner,TheParagon,TheReasonYouSuckSpeech,TheRemnant,TheScottishTrope,TheSlowPath,TheStinger,TheStinger,TheStinger,TheStinger,TheStinger,TheUnfavorite,TheUnreveal,ThemeMusicPowerUp,ThereIsNoKillLikeOverkill,TheyWastedAPerfectlyGoodSandwich,ThinkingUpPortals,ThisIsGonnaSuck,ThrowTheDogABone,ThwartedCoupDeGrace,TimeIsDangerous,TimeMachine,TimeShiftedActor,TimeShiftedActor,TimeSkip,TimeSkip,TimeSkip,TimeSkip,TimeSkip,TimeSkip,TimeSkip,TimeSkip,TimeSkip,TimeSkip,TimeSkip,TimeSkip,TimeTravel,TimeTravel,TimeTravel,TimeTravel,TimeTravelEpisode,TimeTravelRomance,TimeTravelTropes,TimeyWimeyBall,ToBeContinued,TookALevelInJerkass,TrailersAlwaysSpoil,TranquilFury,TrashTheSet,TrickedOutTime,TropaholicsAnonymous,TrustPassword,TrustPassword,TwentyMinutesIntoTheFuture,UnPaused,UnknownRival,UnspokenPlanGuarantee,UnusuallyUninterestingSight,UpToEleven,UseYourHead,VengeanceFeelsEmpty,VideoWill,VigilanteMan,VikingFuneral,VillainBall,VillainHasAPoint,VillainousBreakdown,VillainousBreakdown,VillainsNeverLie,VillainsWantMercy,WalkingTheEarth,Watsonian,WeHaveReserves,WeOnlyHaveOneChance,WhamLine,WhamShot,WhatDoesSheSeeInHim,WhatHappenedToTheMouse,WhatYouAreInTheDark,WorfHadTheFlu,WouldHurtAChild,WrittenByTheWinners,WrongGenreSavvy,WrongTimeTravelSavvy,Yakuza,Yakuza,YearOutsideHourInside,YearOutsideHourInside,YouAreFat,YouAreNotAlone,YouAreTooLate,YouShouldHaveDiedInstead,YourLittleDismissiveDiminutive,YourPrincessIsInAnotherCastle,ZigzaggedTrope'
    evaluation = evaluator.evaluate(avengers_endgame_tropes.split(','))
    print(evaluation)

    pulp_fiction_tropes = 'AFIS100Years100Movies,AFIS100Years100Movies10THAnniversaryEdition,AFIS100Years100Thrills,ActionAdventureTropes,ActorAllusion,AddedAlliterativeAppeal,Administrivia,AdultFear,AffablyEvil,AfroAsskicker,AlasPoorVillain,AllThereInTheScript,AlliterativeName,AloneWithThePsycho,AnAesop,AnachronicOrder,AndStarring,AnimationTropes,Anime,AnthologyFilm,AntiHero,AppliedPhlebotinum,ArtisticLicenseGunSafety,ArtisticLicenseMedicine,AsHimself,AsLongAsItSoundsForeign,AsTheGoodBookSays,AsianStoreOwner,AssShove,AssholeVictim,AudibleSharpness,AuthorAppeal,AvertedTrope,BadassBack,BadassBoast,BadassCreed,BaldBlackLeaderGuy,BatterUp,BeamMeUpScotty,BeautyIsNeverTarnished,BerserkButton,BetrayalTropes,BigBad,BigNo,BigShutUp,BlackAndGrayMorality,BlackComedy,BlackComedyRape,BlahBlahBlah,BlatantLies,BloodyHilarious,BlownAcrossTheRoom,BookEnds,BoundAndGagged,Bowdlerise,BreakThemByTalking,BreakUpMakeUpScenario,BrickJoke,BritishTellyTropes,BumblingSidekick,CIA,CainAndAbel,CallingYourBathroomBreaks,CampingACrapper,CasualtyInTheRing,CatapultNightmare,CatchPhrase,CavalierConsumption,CensorshipTropes,CentralTheme,ChainsawGood,ChanceMeetingBetweenAntagonists,CharacterizationTropes,Characters,CharactersAsDevice,CleanupCrew,ClicheStorm,Cloudcuckoolander,ClusterFBomb,ColdBloodedTorture,CombatTropes,ComedyTropes,ComicBookTropes,CommercialsTropes,ConscienceMakesYouGoBack,ContrivedCoincidence,CoolCar,CreatorCameo,CreatorSpeak,Creators,CreditsGag,CrimeAndPunishmentTropes,CriminalProcedural,CultSoundtrack,CutHisHeartOutWithASpoon,DeathTropes,DeconstructiveParody,DecoyProtagonist,DepravedHomosexual,DerivativeWorks,DestinationDefenestration,DiagonalCut,Dialogue,DictionaryOpening,DiesWideOpen,DirtyCop,Discussed,DisposingOfABody,DisproportionateRetribution,DivineIntervention,DoesNotLikeShoes,DoubleSubverted,DoubleTake,DramaTropes,DramaticGunCock,DrivesLikeCrazy,DrivingADesk,DropTheHammer,DroppedABridgeOnHim,DrugsAreBad,EarnYourHappyEnding,EnemyEatsYourLunch,EnemyMine,EnsembleCast,EpicFail,EqualOpportunityEvil,EvenEvilHasLovedOnes,EvenEvilHasStandards,EvilIsHammy,ExactWords,FamilyTropes,FamousLastWords,FanDisservice,FanFic,FateAndProphecyTropes,FateWorseThanDeath,FauxAffablyEvil,Film,FilmsOf19901994,FiveManBand,FlatEarthAtheist,FoodTropes,ForWantOfANail,Foreshadowing,FreestateAmsterdam,FunnyBackgroundEvent,GameTropes,GeniusDitz,Gorn,GoryDiscretionShot,GroinAttack,HalfwayPlotSwitch,HallwayFight,HandCannon,HashHouseLingo,HatesSmallTalk,HeelFaithTurn,HeelRealization,HeldGaze,HolidayTropes,HollywoodSilencer,HolyHitman,HorrorTropes,HypercompetentSidekick,HyperlinkStory,HypocriticalHumor,IJustShotMarvinInTheFace,IceCreamKoan,ImOkay,ImagineSpot,ImperialStormtrooperMarksmanshipAcademy,ImpliedTrope,InTheNameOfTheMoon,InUniverse,InformedAttractiveness,InsistentTerminology,IntercourseWithYou,IronicEcho,Irony,ItHasOnlyJustBegun,Jerkass,JiveTurkey,JustForPun,KarmaHoudini,KatanasAreJustBetter,LanguageTropes,LargeHam,LaserGuidedKarma,LawsAndFormulas,LeftTheBackgroundMusicOn,LeftYourLifesaverBehind,LetUsNeverSpeakOfThisAgain,LethallyExpensive,LethallyStupid,LiteralMinded,Literature,LoveTropes,MacGuffin,MagicBullets,MaltShop,ManicPixieDreamGirl,MarilynManeuver,MaybeMagicMaybeMundane,MeaningfulBackgroundEvent,MeaningfulName,Media,MementoMacGuffin,MemeticMutation,MemoryTropes,MessyPig,MexicanStandoff,MoneyTropes,MoodWhiplash,MoralDilemma,MoralityTropes,Motifs,MuggingTheMonster,MusicAndSoundEffects,NWordPrivileges,NarrativeDevices,NewMediaTropes,NewsTropes,NobodyPoops,NoodleImplements,NoodleIncident,NotableQuotables,OddCouple,OffscreenMomentOfAwesome,OhCrap,OneLinerNameOneLiner,OnlyAFleshWound,OnlyKnownByTheirNickname,OutlawCouple,PackagedAsOtherMedium,PantsPositiveSafety,Paratext,PayEvilUntoEvil,PedalToTheMetalShot,PersonaNonGrata,PinkMist,PlayedForLaughs,Plots,PoliticallyIncorrectVillain,PoliticsTropes,PornStache,PreAsskickingOneLiner,PreMortemOneLiner,PrecisionFStrike,PrettyLittleHeadshots,Pride,PrintMediaTropes,ProfessionalWrestling,PulpMagazine,PunctuatedForEmphasis,PunkInTheTrunk,Radio,RandomEventsPlot,RapeAsDrama,RapeIsASpecialKindOfEvil,RapePortrayedAsRedemption,ReCut,RealMenTakeItBlack,RealityEnsues,ReferenceOverdosed,RefugeInAudacity,ReligionTropes,RetiredMonster,RetroUniverse,RiddleForTheAges,RogerEbertGreatMoviesList,RuleOfCool,RuleOfThree,RunningGag,ScaryBlackMan,SceneryPorn,SchoolStudyMedia,SchoolTropes,SeanConneryIsAboutToShootYou,SeinfeldianConversation,SequentialArt,SerialKiller,SeriousBusiness,Settings,ShareTheMalePain,SharedUniverse,SheIsNotMyGirlfriend,ShipTease,ShotToTheHeart,ShoutOut,ShowBusiness,ShownTheirWork,SickeningSweethearts,SignatureStyle,SignsOfDisrepair,SmokingIsCool,SoulBrotha,SoundtrackDissonance,Spectacle,SpeculativeFictionTropes,SpeechImpediment,SpiritualSuccessor,SplitPersonalityTropes,SportsStoryTropes,StockRoom,StopSayingThat,StrayShotsStrikeNothing,StupidCrooks,StylisticSuck,SurfRock,TabletopGames,TakeOurWordForIt,TheAtoner,TheCameo,TheContributors,TheFifties,TheKnightsWhoSaySquee,TheLoad,TheMenInBlack,TheMole,TheNineties,ThePreciousPreciousCar,ThePublicDomainChannel,TheReveal,TheSomethingForce,TheThemeParkVersion,Theater,ThereAreNoPolice,ThereIsNoKillLikeOverkill,ThirdPersonFlashback,ThoseTwoBadGuys,ThrowingTheFight,ToThePain,TooDumbToLive,TortureCellar,TragicKeepsake,TranslationByVolume,TreasureChestCavity,TropeCodifier,TropeNamers,TropeTropes,Tropes,TrunkShot,TruthAndLies,TruthInTelevision,UnderdressedForTheOccasion,Unishment,UniversalTropes,UnusuallyUninterestingSight,UpToEleven,VerbalBusinessCard,VictimizedBystander,VideogameTropes,VillainEatsYourLunch,VillainProtagonist,VillainsOutShopping,VisualPun,VitriolicBestBuds,WackyCravings,WalkingTheEarth,WarTropes,WaxingLyrical,Webcomics,WhamLine,WhatAnIdiot,WhatHappenedToTheMouse,WhatYouAreInTheDark,WolverinePublicity,WordOfGod,WorstAid,genre_Crime,genre_Drama'
    evaluation = evaluator.evaluate(pulp_fiction_tropes.split(','))
    print(evaluation)

    alone_in_the_dark_tropes = 'AbandonedHospital,AbandonedMine,AccentUponTheWrongSyllable,ActionAdventureTropes,Administrivia,AnimationTropes,Anime,AppliedPhlebotinum,ArtisticLicenseMartialArts,BMovie,BetrayalTropes,BizarreAndImprobableBallistics,BritishTellyTropes,CaptainErsatz,CensorshipTropes,CharacterizationTropes,Characters,CharactersAsDevice,ChewingTheScenery,CoitusEnsues,ColorCodedSecretIdentity,CombatTropes,ComedyTropes,ComicBookTropes,CommercialsTropes,CreatorSpeak,Creators,CrimeAndPunishmentTropes,DeathTropes,DerivativeWorks,Dialogue,DramaTropes,EasyAmnesia,EveryBulletIsATracer,FamilyTropes,FanFic,FateAndProphecyTropes,Film,FilmsOf20052009,FlippingTheTable,FoodTropes,GameTropes,HolidayTropes,HorrorFilms,HorrorTropes,HotScientist,InNameOnly,JumpCut,LanguageTropes,LawsAndFormulas,Literature,LoveTropes,MadScientist,Media,MemoryTropes,MoneyTropes,MoralityTropes,Motifs,MusicAndSoundEffects,NarrativeDevices,NeverMyFault,NewMediaTropes,NewsTropes,NippleAndDimed,OpeningScroll,Paratext,PlayingAgainstType,PlotHole,Plots,PoliticsTropes,Precursors,PrintMediaTropes,ProfessionalWrestling,ProlongedPrologue,PromotedToLoveInterest,Radio,ReligionTropes,RetCanon,RuleOfCool,SchoolTropes,SealedEvilInACan,SequelHook,SequentialArt,Settings,ShakyPOVCam,ShowBusiness,SlapSlapKiss,SoundtrackDissonance,Spectacle,SpeculativeFictionTropes,SplitPersonalityTropes,SportsStoryTropes,StockRoom,SurvivalHorror,TabletopGames,TheContributors,TheLivingDead,Theater,ThereWasADoor,TropeMaker,TropeTropes,Tropes,TruthAndLies,TruthInTelevision,UniversalTropes,ValuesDissonance,VideoGameMovies,VideogameTropes,WallOfText,WarTropes,Webcomics,WhatCouldHaveBeen,genre_Action,genre_Horror,genre_Sci-Fi'
    evaluation = evaluator.evaluate(alone_in_the_dark_tropes.split(','))
    print(evaluation)

    print(evaluator.evaluate_just_rating(alone_in_the_dark_tropes.split(',')))
